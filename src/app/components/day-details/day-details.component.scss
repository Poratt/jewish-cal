@use 'variables' as *;
@use 'animations' as *;

:host {
	display: block;
	padding: 0;
}

.day-details-container {
	display: flex;
	flex-direction: column;
	font-family: var(--app-font-family);
	font-size: 13px;

	.aliyot-grid,
	.zmanim-group,
	.day-details-section {
		&:nth-of-type(1) { animation: slideUpFade 0.4s 0.1s both; }
		&:nth-of-type(2) { animation: slideUpFade 0.4s 0.2s both; }
		&:nth-of-type(3) { animation: slideUpFade 0.4s 0.3s both; }
		&:nth-of-type(4) { animation: slideUpFade 0.4s 0.4s both; }
	}
}

// --- Header ---
.day-details-header {
	display: grid;
	grid-template-columns: 1fr auto 1fr;
	align-items: center;
	padding: 8px 12px;
	position: sticky;
	top: 0; // Stick to the top of the dialog content
	z-index: 10;
	background: linear-gradient(0, rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 1));
	backdrop-filter: blur(4px);
	border-bottom: 1px solid var(--grey-100);
	animation: slideUpFade 0.4s both; 

	.header-content {
		text-align: center;
		display: flex;
		flex-direction: column;
		align-items: center;
	}

	.header-date-gregorian {
		font-size: 0.875rem;
		font-weight: 400;
		margin: 0;
	}

	.header-date-hebrew {
		font-size: 1.25rem;
		font-weight: 600;
		margin: 0.25rem 0 0;
	}

	.header-location-badge {
		display: flex;
		align-items: center;
		gap: 4px;
		font-size: 0.75rem;
		color: var(--grey-500);
		margin-top: 4px;
		i { font-size: 0.75rem; }
	}

	.header-actions {
		display: flex;
		gap: 8px;
		justify-content: flex-end;
	}
}

// --- General Section Styling ---
.day-details-section {
	padding: 12px 16px;
	border-bottom: 1px solid var(--grey-100);

	&:last-child {
		border-bottom: none;
	}

	.section-header {
		font-size: 0.8rem;
		font-weight: 600;
		color: color-mix(in srgb, var(--theme-color) 25%, var(--grey-500));
		margin: 0 0 12px;
		display: flex;
		align-items: center;
		gap: 6px;
	}

	.section-header-with-control {
		display: flex;
		width: 100%;
		align-items: center;
		justify-content: space-between;
		margin-bottom: 12px;

		.section-header {
			margin-bottom: 0;
		}
	}

	.section-content {
		display: flex;
		flex-direction: column;
		gap: 8px;
	}
}

// --- Events Section ---
.event-item {
	display: flex;
	flex-wrap: wrap;
	align-items: baseline;
	gap: 4px 8px;
	font-size: 13px;
	color: var(--grey-700);
	
	.event-item-wrapper {
		display: flex;
		align-items: center;
		gap: 8px;
		width: 100%;
	}

	.event-item-icon {
		font-size: 14px;
		width: 48px;
		display: flex;
		justify-content: flex-end;
		align-items: center;

	}
	
	.event-item-times {
		font-size: 11px;
		color: var(--grey-500);
	}

	.event-item-link {
		color: var(--grey-400);
		font-size: 11px;
		padding-top: 3px;
		transition: color 0.2s ease;
		&:hover { color: var(--primary-500); }
	}
}
.omer-event {
	display: flex;
	align-items: baseline;
	text-align: center;
	gap: 4px;

}


// --- Leyning (Torah Reading) Section ---
.leyning-item {
	display: flex;
	align-items: baseline;
	gap: 8px;
	margin: 0;
	font-size: 13px;
	
	&-label {
		font-weight: 500;
		color: var(--grey-800);
		min-width: 50px;
		font-size: 11px;
	}

	&-verses {
		color: var(--grey-500);
	}
}
.aliyot-grid {
	display: flex;
	flex-direction: column;
	gap: 6px;
	margin-top: 12px;
	.aliyot-grid-item {
		font-weight: 500;
		font-size: 11px;
		color: var(--grey-800);
		margin-bottom: 4px;
	}
}
.aliyah-item {
	display: flex;
	align-items: baseline;
	gap: 12px;
	font-size: 13px;
	color: var(--grey-700);

	.aliyah-item-name {
		font-weight: 500;
		color: var(--grey-800);
		min-width: 40px;
		font-size: 11px;
	}
	.aliyah-item-book { min-width: 60px; }
}

// --- Zmanim Section ---
.zmanim-grid {
	display: flex;
	flex-direction: column;
	gap: 12px;
}
.zmanim-group {
	display: flex;
	flex-direction: column;
	gap: 6px;
	position: relative;

	&::after {
		content: '';
		position: absolute;
		height: 1px;
		width: 95%;
		background-color: var(--grey-200);
		left: 50%;
		top: 50%;
		transform: translate(-50%, -50%);
		z-index: 0;
	}

	.zmanim-group-title {
		font-size: 10px;
		font-weight: 500;
		color: var(--grey-500);
		background-color: var(--grey-10); // Match dialog bg for line break effect
		padding: 0 4px;
		width: fit-content;
		z-index: 1;
	}

	.zmanim-group-row {
		display: flex;
		justify-content: space-between;
		gap: 6px;
	}
}
.zman-item {
	display: flex;
	flex-direction: column;
	flex: 1;
	justify-content: space-between;
	padding: 4px;
	align-items: center;
	text-align: center;
	line-height: 1.2;
	font-size: 10px;
	z-index: 2;
	background: linear-gradient(135deg, var(--grey-20) 0%, var(--grey-40) 100%);
	border-radius: 5px;
	border: 1px solid var(--grey-100);
	transition: all 0.2s ease;
	max-width: 80px;

	&:hover {
		transform: translateY(-1px);
		box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
		border-color: color-mix(in srgb, var(--theme-color) 30%, var(--grey-200));
	}

	.zman-item-name { font-weight: 500; }
	.zman-item-time { font-weight: 400; }
	
	&.past {
		background: var(--grey-20);
		color: var(--grey-400);
	}

	&.next {
		border-color: color-mix(in srgb, var(--theme-color) 50%, transparent);
		background: color-mix(in srgb, var(--theme-color) 10%, white);
		transform: translateY(-2px);
		box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
		.zman-item-name, .zman-item-time {
			color: var(--theme-color);
			font-weight: 600;
		}
	}
}

// --- Daily Learning Section ---
.learning-grid {
	display: grid;
	grid-template-columns: repeat(2, 1fr);
	gap: 8px;
	@media (min-width: $xs) {
		grid-template-columns: repeat(3, 1fr);
	}
}
.learning-item {
	display: flex;
	flex-direction: column;
	gap: 4px;
	line-height: 1.2;
	font-size: 10px;
	background: linear-gradient(135deg, var(--grey-20) 0%, var(--grey-40) 100%);
	padding: 10px 12px;
	border-radius: 5px;
	border: 1px solid var(--grey-100);
	transition: all 0.2s ease;

	&:hover {
		transform: translateY(-1px);
		box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
		border-color: color-mix(in srgb, var(--theme-color) 30%, var(--grey-200));
	}

	.learning-item-title {
		font-weight: 500;
		color: var(--grey-800);
		font-size: 11px;
	}

	.learning-item-content {
		color: var(--grey-600);
		font-size: 12px;
	}
}

// --- Toggle Switch (GRA/MGA) ---
.toggle-switch {
	display: flex;
	width: 128px;
	height: 28px;
	position: relative;
	border-radius: 6px;
	background-color: var(--grey-50);
	border: 1px solid var(--grey-100);
	padding: 1px;
	overflow: hidden;
	user-select: none;
	transition: background-color 0.3s ease, border-color 0.3s ease;

	&::after {
		content: '';
		position: absolute;
		width: calc(50% - 2px);
		height: calc(100% - 4px);
		top: 2px;
		left: 2px;
		border-radius: 4px;
		background-color: color-mix(in srgb, var(--theme-color) 3%, var(--grey-10));
		box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
		transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
		z-index: 1;
	}

	&.right::after {
		transform: translateX(100%);
	}

	.toggle-switch-text {
		flex: 1;
		display: flex;
		align-items: center;
		justify-content: center;
		z-index: 2;
		transition: color 0.3s ease, font-weight 0.3s ease;
		cursor: pointer;
		font-size: 9px;
		line-height: 9px;
		text-align: center;
		color: var(--grey-600);
		padding: 0 6px;

		&:hover {
			color: color-mix(in srgb, var(--theme-color) 35%, var(--grey-800));
		}
		&.active {
			color: color-mix(in srgb, var(--theme-color) 55%, var(--grey-500));
		}
	}
}